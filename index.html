<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Cuisine Journey</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Sarabun:wght@300;400;700&family=Prompt:wght@300;400;600&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg-color: #1a1008;
            --gold-color: #ffdb58;
            --card-bg: rgba(20, 10, 5, 0.90);
            --text-color: #f3e5ab;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Sarabun', sans-serif;
            overflow-x: hidden;
        }

        h1,
        h2,
        h3 {
            font-family: 'Playfair Display', serif;
        }

        .thai-header {
            font-family: 'Prompt', sans-serif;
        }

        .map-fixed-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 0;
            overflow: hidden;
            background: #ffce80;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .map-inner {
            width: 100%;
            max-width: 1600px;
            aspect-ratio: 16 / 9;
            position: relative;
            transform-origin: center center;
            will-change: transform;
        }

        .world-map-bg {
            width: 100%;
            height: 100%;
            object-fit: fill;
            filter: sepia(1) saturate(5) brightness(0.25) contrast(1.2);
            opacity: 0.8;
        }

        .map-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .route-path {
            fill: none;
            stroke: var(--gold-color);
            stroke-width: 2px;
            stroke-dasharray: 2000;
            stroke-dashoffset: 2000;
            stroke-linecap: round;
            filter: drop-shadow(0 0 5px rgba(255, 219, 88, 0.8));
        }

        .marker {
            position: absolute;
            width: 5px;
            height: 5px;
            background: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px red;
            z-index: 3;
        }

        .flag-icon {
            position: absolute;
            font-size: 2rem;
            transform: translate(-50%, -100%) scale(0);
            z-index: 4;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8));
            transition: transform 0.3s ease;
        }

        .loc-th {
            left: 77.2%;
            top: 47.0%;
        }

        .loc-jp {
            left: 86.8%;
            top: 33.5%;
        }

        .loc-cn {
            left: 79.7%;
            top: 31.0%;
        }

        .loc-au {
            left: 90.7%;
            top: 71.0%;
        }

        .loc-fr {
            left: 48.2%;
            top: 30.0%;
        }

        .loc-us {
            left: 26.9%;
            top: 33.0%;
        }

        .texture-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("https://www.transparenttextures.com/patterns/aged-paper.png");
            opacity: 0.3;
            pointer-events: none;
            z-index: 10;
            mix-blend-mode: overlay;
        }

        .vignette-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* background: radial-gradient(circle, transparent 40%, #000 100%); */
            opacity: 0.8;
            pointer-events: none;
            z-index: 11;
        }

        .scroll-container {
            position: relative;
            z-index: 20;
        }

        .section {
            min-height: 120vh;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0 5%;
            position: relative;
        }

        #sec-fr,
        #sec-us {
            justify-content: flex-end;
        }

        #sec-outro {
            min-height: 100vh;
            justify-content: center;
            text-align: center;
            flex-direction: column;
        }

        .content-card {
            background: var(--card-bg);
            padding: 3rem;
            width: 45vw;
            max-width: 800px;
            border-left: 4px solid var(--gold-color);
            box-shadow: 10px 10px 40px rgba(0, 0, 0, 0.9);
            transform: translateY(50px);
            opacity: 0;
            backdrop-filter: blur(8px);
            margin-left: 2%;
        }

        #sec-fr .content-card,
        #sec-us .content-card {
            margin-left: 0;
            margin-right: 2%;
            border-left: none;
            border-right: 4px solid var(--gold-color);
        }

        .content-card h2 {
            color: var(--gold-color);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #555;
            padding-bottom: 15px;
        }

        .quote-text {
            font-family: 'Prompt', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .desc-text {
            font-size: 1rem;
            color: #ddd;
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .img-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .img-grid img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border: 1px solid #8b5e3c;
            filter: sepia(0.2);
            transition: filter 0.3s;
        }

        .img-grid img:hover {
            filter: sepia(0);
        }

        .section.intro {
            min-height: 100vh;
            justify-content: center;
            text-align: center;
        }

        @media (max-width: 768px) {
            .section {
                justify-content: center;
                padding: 20px;
                min-height: 100vh;
            }

            #sec-fr,
            #sec-us {
                justify-content: center;
            }

            .content-card {
                width: 100%;
                max-width: 100%;
                margin-left: 0;
                margin-right: 0;
                transform: translateY(50px);
                padding: 2rem;
            }

            #sec-fr .content-card,
            #sec-us .content-card {
                margin-right: 0;
                border-left: 4px solid var(--gold-color);
                border-right: none;
            }

            .img-grid img {
                height: 120px;
            }
        }
    </style>
</head>

<body>
    <div class="map-fixed-container">
        <div class="map-inner" id="map-click-target">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/World_map_-_low_resolution.svg/2000px-World_map_-_low_resolution.svg.png"
                alt="World Map" class="world-map-bg">

            <svg class="map-svg" viewBox="0 0 1000 600" preserveAspectRatio="none">
                <path id="path-jp" class="route-path" d="M772,282 Q820,200 868,201" />
                <path id="path-cn" class="route-path" d="M772,282 Q785,220 797,186" />
                <path id="path-au" class="route-path" d="M772,282 Q840,380 907,426" />
                <path id="path-fr" class="route-path" d="M772,282 Q620,150 482,180" />
                <path id="path-us" class="route-path" d="M772,282 Q500,50 269,198" />
            </svg>

            <div class="marker loc-th"></div>
            <div class="flag-icon loc-jp" id="flag-jp" data-flag="üáØüáµ">üáØüáµ</div>
            <div class="flag-icon loc-cn" id="flag-cn" data-flag="üá®üá≥">üá®üá≥</div>
            <div class="flag-icon loc-au" id="flag-au" data-flag="üá¶üá∫">üá¶üá∫</div>
            <div class="flag-icon loc-fr" id="flag-fr" data-flag="üá´üá∑">üá´üá∑</div>
            <div class="flag-icon loc-us" id="flag-us" data-flag="üá∫üá∏">üá∫üá∏</div>
        </div>
    </div>

    <div class="texture-overlay"></div>
    <div class="vignette-overlay"></div>

    <div class="scroll-container">
        <section class="section intro" id="sec-intro">
            <div style="z-index: 20;">
                <h1 style="font-size: 5rem; color: var(--gold-color); line-height: 1.1;">THAI TASTE<br>ODYSSEY</h1>
                <p style="font-size: 1.5rem; margin-top: 20px;">‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÑ‡∏ó‡∏¢‡∏™‡∏π‡πà‡∏™‡∏≤‡∏Å‡∏•</p>
                <p style="margin-top:20px; font-size: 0.9rem; opacity: 0.7;">(Scroll Down to Explore)</p>
            </div>
        </section>

        <section class="section" id="sec-jp">
            <div class="content-card">
                <h2 class="thai-header">"‡∏£‡∏™‡πÑ‡∏ó‡∏¢‡πÉ‡∏ô‡∏î‡∏¥‡∏ô‡πÅ‡∏î‡∏ô‡∏≠‡∏π‡∏°‡∏≤‡∏°‡∏¥" üáØüáµ</h2>
                <p class="quote-text">‚Äú‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô...‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏á‡πÉ‡∏´‡∏•‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‚Äù</p>
                <div class="img-grid">
                    <img src="https://images.unsplash.com/photo-1548661710-7f540c9c56d6?auto=format&fit=crop&q=80&w=400"
                        alt="Tom Yum">
                    <img src="https://images.unsplash.com/photo-1559314809-0d155014e29e?auto=format&fit=crop&q=80&w=400"
                        alt="Pad Thai">
                </div>
                <p class="desc-text" style="margin-top: 20px;">
                    ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 1,000 ‡πÅ‡∏´‡πà‡∏á ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏ï‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß ‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ "‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢" ‡πÅ‡∏•‡∏∞ "‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á"
                    ‡∏Å‡∏¥‡∏ô‡πÄ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô ‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡∏°‡∏∏‡∏ô‡∏•‡∏∞‡πÑ‡∏°‡πÅ‡∏ö‡∏ö‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô
                </p>
            </div>
        </section>

        <section class="section" id="sec-cn">
            <div class="content-card">
                <h2 class="thai-header">China üá®üá≥</h2>
                <p class="quote-text">‡∏£‡∏≤‡∏Å‡πÄ‡∏´‡∏á‡πâ‡∏≤‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢</p>
                <div class="img-grid" style="grid-template-columns: 1fr;">
                    <img src="https://placehold.co/600x300/2a1b12/cfa166?text=Chinese+Influence" alt="China">
                </div>
                <p class="desc-text" style="margin-top: 15px;">‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡πÄ‡∏´‡∏•‡πá‡∏Å (Wok) ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß
                    ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢ ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏ï‡πâ‡∏ô‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏•‡πÄ‡∏ß‡∏•‡∏≤
                </p>
            </div>
        </section>

        <section class="section" id="sec-au">
            <div class="content-card">
                <h2 class="thai-header">Australia üá¶üá∫</h2>
                <p class="quote-text">‡∏ã‡∏¥‡∏î‡∏ô‡∏µ‡∏¢‡πå...‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏´‡∏•‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢</p>
                <div class="img-grid" style="grid-template-columns: 1fr;">
                    <img src="https://placehold.co/600x300/2a1b12/cfa166?text=Thai+Town+Sydney" alt="Australia">
                </div>
                <p class="desc-text" style="margin-top: 15px;">Thai Town ‡πÉ‡∏ô‡∏ã‡∏¥‡∏î‡∏ô‡∏µ‡∏¢‡πå‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏°
                    ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Comfort Food ‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡∏≠‡∏≠‡∏™‡∏ã‡∏µ‡πà ‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏û‡∏≠‡πÜ ‡∏Å‡∏±‡∏ö‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ä‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå
                </p>
            </div>
        </section>

        <section class="section" id="sec-fr">
            <div class="content-card">
                <h2 class="thai-header">France üá´üá∑</h2>
                <p class="quote-text">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏ì‡∏µ‡∏ï‡∏£‡∏∞‡∏î‡∏±‡∏ö Fine Dining</p>
                <div class="img-grid" style="grid-template-columns: 1fr;">
                    <img src="https://placehold.co/600x300/2a1b12/cfa166?text=Fine+Dining" alt="France">
                </div>
                <p class="desc-text" style="margin-top: 15px;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏™‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢ ‡∏ú‡∏™‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™
                    ‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà ‡∏ó‡∏µ‡πà‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢‡∏™‡∏π‡πà‡πÄ‡∏ß‡∏ó‡∏µ‡πÇ‡∏•‡∏Å‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤</p>
            </div>
        </section>

        <section class="section" id="sec-us">
            <div class="content-card">
                <h2 class="thai-header">USA üá∫üá∏</h2>
                <p class="quote-text">Gastrodiplomacy: ‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
                <div class="img-grid" style="grid-template-columns: 1fr;">
                    <img src="https://placehold.co/600x300/2a1b12/cfa166?text=Pad+Thai+Diplomacy" alt="USA">
                </div>
                <p class="desc-text" style="margin-top: 15px;">
                    ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï‡πÉ‡∏ô‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                    ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°</p>
            </div>
        </section>

        <section class="section" id="sec-outro">
            <div style="z-index: 20;">
                <h2 style="font-size: 3rem; color: var(--gold-color);">The Journey Continues</h2>
                <p class="thai-header" style="font-size: 1.25rem; margin-top: 20px;">
                    ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢...‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡πÑ‡∏Å‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å<br>‡πÅ‡∏ï‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°</p>
            </div>
        </section>

        <div style="height: 10vh;"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        const locations = {
            intro: { scale: 1.5, x: 55, y: 45 },
            jp: { scale: 2.2, x: 78.1, y: 33.5 },
            cn: { scale: 2.2, x: 75.7, y: 31.0 },
            au: { scale: 2.2, x: 82.7, y: 71.0 },
            fr: { scale: 2.2, x: 55.2, y: 30.0 },
            us: { scale: 2.2, x: 29.9, y: 33.0 },

            overview: { scale: 1.5, x: 55, y: 45 },
        };

        function calculateTransform(loc) {
            return {
                scale: loc.scale,
                xPercent: (50 - loc.x) * loc.scale,
                yPercent: (50 - loc.y) * loc.scale
            };
        }

        const initialPos = calculateTransform(locations.intro);
        gsap.set(".map-inner", {
            scale: initialPos.scale,
            xPercent: initialPos.xPercent,
            yPercent: initialPos.yPercent
        });

        document.querySelectorAll('.route-path').forEach(path => {
            const len = path.getTotalLength();
            gsap.set(path, { strokeDasharray: len, strokeDashoffset: len });
        });

        function createScene(targetId, locKey, pathId, flagId) {
            const targetPos = calculateTransform(locations[locKey]);

            let tl = gsap.timeline({
                scrollTrigger: {
                    trigger: targetId,
                    start: "top bottom",
                    end: "center center",
                    scrub: 1,
                }
            });

            tl.to(".map-inner", {
                scale: targetPos.scale,
                xPercent: targetPos.xPercent,
                yPercent: targetPos.yPercent,
                ease: "power1.inOut",
                duration: 1
            });

            if (pathId) {
                tl.to(pathId, {
                    strokeDashoffset: 0,
                    ease: "power1.out",
                    duration: 0.6
                }, "<");
            }

            ScrollTrigger.create({
                trigger: targetId,
                start: "center center",
                end: "bottom center",
                onEnter: () => {
                    if (flagId) {
                        const flagEl = document.querySelector(flagId);
                        flagEl.innerText = flagEl.dataset.flag;
                        gsap.to(flagId, { scale: 1, duration: 0.6, ease: "elastic.out(1, 0.5)" });
                    }
                },
                onLeave: () => {
                    if (flagId) {
                        const flagEl = document.querySelector(flagId);
                        gsap.to(flagId, {
                            scale: 0,
                            duration: 0.1,
                            onComplete: () => {
                                flagEl.innerHTML = '<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Flag_of_Thailand.svg/100px-Flag_of_Thailand.svg.png" style="width: 40px; height: auto; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.5);">';
                                gsap.to(flagId, { scale: 1, duration: 0.1 });
                            }
                        });
                    }
                },
                onEnterBack: () => {
                    if (flagId) {
                        const flagEl = document.querySelector(flagId);
                        gsap.to(flagId, {
                            scale: 0, duration: 0.2,
                            onComplete: () => {
                                flagEl.innerText = flagEl.dataset.flag;
                                gsap.to(flagId, { scale: 1, duration: 0.3 });
                            }
                        });
                    }
                },
                onLeaveBack: () => {
                    if (flagId) gsap.to(flagId, { scale: 0, duration: 0.3 });
                }
            });
        }

        createScene("#sec-jp", "jp", "#path-jp", "#flag-jp");
        createScene("#sec-cn", "cn", "#path-cn", "#flag-cn");
        createScene("#sec-au", "au", "#path-au", "#flag-au");
        createScene("#sec-fr", "fr", "#path-fr", "#flag-fr");
        createScene("#sec-us", "us", "#path-us", "#flag-us");

        const overviewPos = calculateTransform(locations.overview);

        gsap.to(".map-inner", {
            scale: overviewPos.scale,
            xPercent: overviewPos.xPercent,
            yPercent: overviewPos.yPercent,
            ease: "power1.inOut",
            scrollTrigger: {
                trigger: "#sec-outro",
                start: "top 85%",
                end: "center center",
                scrub: 1.5
            }
        });

        document.querySelectorAll('.content-card').forEach(card => {
            gsap.to(card, {
                opacity: 1,
                y: 0,
                duration: 0.8,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: card,
                    start: "top 45%",
                    end: "bottom top",
                    toggleActions: "play reverse play reverse"
                }
            });
        });

    </script>
</body>

</html>